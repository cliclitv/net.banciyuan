var k=Object.defineProperty,A=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var x=(o,e,i)=>e in o?k(o,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[e]=i,f=(o,e)=>{for(var i in e||(e={}))y.call(e,i)&&x(o,i,e[i]);if(g)for(var i of g(e))z.call(e,i)&&x(o,i,e[i]);return o},F=(o,e)=>A(o,C(e));import{p as d,c as I,b,d as N,e as P,_ as t,f as _,h as q,i as M}from"./index.baf9c1a2.js";let s=!1;const S=["\u9B3C\u755C","AMV/MAD","\u97F3\u4E50\xB7PV","\u6E38\u620F\xB7GMV","VOCALOID","\u539F\u795E","\u661F\u7A79\u94C1\u9053","\u5D29\u574F\u4E09","\u660E\u65E5\u65B9\u821F","\u706B\u5F71\u5FCD\u8005","\u4E09\u56FD\u6740","\u7EDD\u533A\u96F6","\u53CD\u6050\u7CBE\u82F1","\u82F1\u96C4\u8054\u76DF","\u738B\u8005\u8363\u8000","\u585E\u5C14\u8FBE","\u78A7\u84DD\u822A\u7EBF","\u9E23\u6F6E","\u65E0\u754F\u5951\u7EA6","\u6211\u7684\u4E16\u754C","\u5176\u5B83"],T=["\u63A8\u8350","\u5E7B\u706F","\u56FD\u6F2B","\u7F8E\u6F2B","\u5267\u573A\u7248","\u6F2B\u753B\u6539","\u5C0F\u8BF4\u6539","\u6E38\u620F\u6539","\u803D\u7F8E","\u4E59\u5973","\u767E\u5408","\u540E\u5BAB","\u70ED\u8840","\u6218\u6597","\u8FD0\u52A8","\u5947\u5E7B","\u795E\u9B54","\u6CBB\u6108","\u641E\u7B11","\u5192\u9669","\u6821\u56ED","\u6050\u6016","\u7A7F\u8D8A","\u63A8\u7406","\u79D1\u5E7B","\u65E5\u5E38","\u53E4\u98CE","\u604B\u7231","r15","\u6CE1\u9762\u756A","\u9EC4\u91D1\u5395\u7EB8","\u7279\u6444","\u771F\u4EBA\u5267"];function W(o){const[e,i]=d({title:"",status:"\u5F85\u5BA1\u6838",sort:"\u539F\u521B",time:"",content:"",tag:"",videos:""}),n=I(),[r,p]=d([]),[m,B]=d([]),[c,v]=d(T);b(()=>{window.md=new window.TinyMDE(document.querySelector("textarea"))},[]),b(()=>{o.id>0&&N(o.id).then(u=>{i(u.result),p(u.result.tag.split(" "))}),n&&(getPostB("","",1,200,"",n==null?void 0:n.id).then(u=>{B(u.posts)}),P().then(u=>{let a=c.concat(u.result.videos.split(`
`));console.log(a),v([...new Set(a)])}))},[o.id]);function l(u,a){i(F(f({},e),{[u]:a}))}function E(u){let a=r;r.includes(u)?a=r.filter(D=>D!=u):a=r.concat([u]),p(a),l("tag",a.join(" "))}function w(){if(!s){if(!e.title||!e.content||!e.sort||!e.tag){alert("\u90FD\u8981\u586B");return}s=!0,o.id>0?q(e).then(u=>{s=!1,alert((u.msg||"\u641E\u5B9A^_^")+" gv"+u.result.id)}):(console.log(e),M(e).then(u=>{s=!1,alert(u.msg||"\u641E\u5B9A^_^")}))}}const h=u=>{window.open(u,"","width=800,height=600,toolbar=no,menubar=no,scrollbars=no,resizeable=no,location=0,status=no").focus()};return console.log(c),t("div",{className:"wrap section",style:{display:"flex"}},t("div",{className:"upload"},t("div",{className:"title"},t("input",{type:"text",placeholder:"\u8BF7\u8F93\u5165\u6807\u9898",value:e.title,onInput:u=>l("title",u.target.value)})),t("section",null,t("i",{class:"te te-bold",onclick:()=>window.md.bold()}),t("i",{class:"te te-italic",onclick:()=>window.md.italic()}),t("i",{class:"te te-quote",onclick:()=>window.md.quote()}),t("i",{class:"te te-image",onclick:()=>window.md.image()}),t("i",{class:"te te-link",onclick:()=>window.md.link()}),t("i",{class:"te te-code",onclick:()=>window.md.blockCode()}),t("i",{class:"te te-upload",onclick:()=>h("https://bcy-upload.deno.dev")})),t("textarea",{spellcheck:"false",placeholder:"\u8BF7\u8F93\u5165\u7B80\u4ECB\uFF0C\u652F\u6301 markdown \u8BED\u6CD5",value:e.content,onInput:u=>l("content",u.target.value)}),t("textarea",{spellcheck:"false",placeholder:`\u76F4\u94FE\u6846\uFF0C\u8BF7\u8F93\u5165\u6807\u9898+$+\u76F4\u94FE\uFF0C\u5982\uFF1A\u7B2C\u4E00\u8BDD$https://clicli.cc/001.mp4
\u591A\u4E2A\u5206P\u7528\u56DE\u8F66\u9694\u5F00`,value:e.videos,class:"videos",onInput:u=>l("videos",u.target.value)}),t("div",{className:"options"},t("select",{onInput:u=>l("status",u.target.value)},t("option",{value:"wait",selected:e.status==="wait"},"\u5F85\u5BA1\u6838"),t("option",{value:"remove",selected:e.status==="remove"},"\u5F85\u5220\u9664"),t("option",{value:"under",selected:e.status==="under"},"\u5DF2\u4E0B\u67B6"),((n==null?void 0:n.level)&12)!==0&&t("option",{value:"public",selected:e.status==="public"},"\u53D1\u5E03")),t("select",{onInput:u=>l("sort",u.target.value)},t("option",{value:"\u65B0\u756A",selected:e.sort==="\u65B0\u756A"},"\u65B0\u756A"),t("option",{value:"\u5B8C\u7ED3",selected:e.sort==="\u5B8C\u7ED3"},"\u5B8C\u7ED3"),t("option",{value:"\u539F\u521B",selected:e.sort==="\u539F\u521B"},"\u539F\u521B")),o.id>0&&t("input",{type:"text",value:e.time,onInput:u=>l("time",u.target.value)})),t("div",{className:"tags"},t("ul",null,(e.sort==="\u539F\u521B"?S:c).map((u,a)=>t("li",{onClick:()=>E(u),key:a.toString(),className:r.includes(u)?"active":""},u)))),t("div",{className:"submit",onClick:w},t("button",null,"\u4FDD\u5B58"))),n&&t("div",{className:"draft"},t("p",null,"\u8349\u7A3F\u7BB1"),t("ul",null,(m||[]).map(u=>t("li",{class:o.id===u.id.toString()?"active":"",onclick:()=>_(`/draft/${u.id}`)},u.title)))))}export{W as default,S as gametags};
